{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Dinar\\\\Desktop\\\\25_MyFrontendProject-master\\\\src\\\\components\\\\Search\\\\search.jsx\";\nimport React from 'react';\nimport '../Search/Search.css';\nimport axios from 'axios';\n\nclass Search extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.fetchSearchResults = (updatedPageNo = '', query) => {\n      const pageNumber = updatedPageNo ? `&page=${updatedPageNo}` : ''; // By default the limit of results is 20\n\n      const searchUrl = `http://test-api.ipromote.ru/API/CATALOG/FIND${query}${pageNumber}`; //http://test-api.ipromote.ru/API/CATALOG/FIND${key}\n\n      if (this.cancel) {\n        // Cancel the previous request before making a new request\n        this.cancel.cancel();\n      } // Create a new CancelToken\n\n\n      this.cancel = axios.CancelToken.source();\n      axios.get(searchUrl, {\n        cancelToken: this.cancel.token\n      }).then(res => {\n        const resultNotFoundMsg = !res.data.hits.length ? 'There are no more search results. Please try a new search.' : '';\n        this.setState({\n          results: res.data.hits,\n          message: resultNotFoundMsg,\n          loading: false\n        });\n      }).catch(error => {\n        if (axios.isCancel(error) || error) {\n          this.setState({\n            loading: false,\n            message: 'Failed to fetch results.Please check network'\n          });\n        }\n      });\n    };\n\n    this.handleOnInputChange = event => {\n      const query = event.target.value;\n\n      if (!query) {\n        this.setState({\n          query,\n          results: {},\n          message: ''\n        });\n      } else {\n        this.setState({\n          query,\n          loading: true,\n          message: ''\n        }, () => {\n          this.fetchSearchResults(1, query);\n        });\n      }\n    };\n\n    this.state = {\n      query: '',\n      results: {},\n      loading: false,\n      message: ''\n    };\n    this.cancel = '';\n  }\n\n  render() {\n    const {\n      query\n    } = this.state;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      className: \"search-label\",\n      htmlFor: \"search-input\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      name: \"query\",\n      value: query,\n      id: \"search-input\",\n      placeholder: \"Search...\",\n      onChange: this.handleOnInputChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 21\n      }\n    }), /*#__PURE__*/React.createElement(\"i\", {\n      className: \"fa fa-search search-icon\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 21\n      }\n    })));\n  }\n\n}\n\nexport default Search;","map":{"version":3,"sources":["C:/Users/Dinar/Desktop/25_MyFrontendProject-master/src/components/Search/search.jsx"],"names":["React","axios","Search","Component","constructor","props","fetchSearchResults","updatedPageNo","query","pageNumber","searchUrl","cancel","CancelToken","source","get","cancelToken","token","then","res","resultNotFoundMsg","data","hits","length","setState","results","message","loading","catch","error","isCancel","handleOnInputChange","event","target","value","state","render"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAO,sBAAP;AACA,OAAOC,KAAP,MAAkB,OAAlB;;AAEA,MAAMC,MAAN,SAAsBF,KAAK,CAACG,SAA5B,CAAsC;AAElCC,EAAAA,WAAW,CAAEC,KAAF,EAAU;AACjB,UAAOA,KAAP;;AADiB,SAYrBC,kBAZqB,GAYA,CAACC,aAAa,GAAG,EAAjB,EAAqBC,KAArB,KAAgC;AAEjD,YAAMC,UAAU,GAAGF,aAAa,GAAI,SAAQA,aAAc,EAA1B,GAA8B,EAA9D,CAFiD,CAIjD;;AACA,YAAMG,SAAS,GAAI,+CAA8CF,KAAM,GAAEC,UAAW,EAApF,CALiD,CAMjD;;AACA,UAAI,KAAKE,MAAT,EAAiB;AACb;AACA,aAAKA,MAAL,CAAYA,MAAZ;AACH,OAVgD,CAWjD;;;AACA,WAAKA,MAAL,GAAcV,KAAK,CAACW,WAAN,CAAkBC,MAAlB,EAAd;AAEAZ,MAAAA,KAAK,CACAa,GADL,CACSJ,SADT,EACoB;AACZK,QAAAA,WAAW,EAAE,KAAKJ,MAAL,CAAYK;AADb,OADpB,EAIKC,IAJL,CAIWC,GAAD,IAAS;AACX,cAAMC,iBAAiB,GAAG,CAACD,GAAG,CAACE,IAAJ,CAASC,IAAT,CAAcC,MAAf,GACpB,4DADoB,GAEpB,EAFN;AAIA,aAAKC,QAAL,CAAc;AACVC,UAAAA,OAAO,EAAEN,GAAG,CAACE,IAAJ,CAASC,IADR;AAEVI,UAAAA,OAAO,EAAEN,iBAFC;AAGVO,UAAAA,OAAO,EAAE;AAHC,SAAd;AAKH,OAdL,EAeKC,KAfL,CAeYC,KAAD,IAAW;AACd,YAAI3B,KAAK,CAAC4B,QAAN,CAAeD,KAAf,KAAyBA,KAA7B,EAAoC;AAChC,eAAKL,QAAL,CAAc;AACVG,YAAAA,OAAO,EAAE,KADC;AAEVD,YAAAA,OAAO,EAAE;AAFC,WAAd;AAIH;AACJ,OAtBL;AAuBH,KAjDoB;;AAAA,SAqDrBK,mBArDqB,GAqDEC,KAAD,IAAW;AAC7B,YAAMvB,KAAK,GAAGuB,KAAK,CAACC,MAAN,CAAaC,KAA3B;;AAEA,UAAK,CAAEzB,KAAP,EAAe;AACX,aAAKe,QAAL,CAAc;AAAEf,UAAAA,KAAF;AAASgB,UAAAA,OAAO,EAAE,EAAlB;AAAsBC,UAAAA,OAAO,EAAE;AAA/B,SAAd;AACH,OAFD,MAEO;AACH,aAAKF,QAAL,CAAc;AAAEf,UAAAA,KAAF;AAASkB,UAAAA,OAAO,EAAE,IAAlB;AAAwBD,UAAAA,OAAO,EAAE;AAAjC,SAAd,EAAqD,MAAM;AACvD,eAAKnB,kBAAL,CAAwB,CAAxB,EAA2BE,KAA3B;AACH,SAFD;AAGH;AACJ,KA/DoB;;AAGjB,SAAK0B,KAAL,GAAa;AACT1B,MAAAA,KAAK,EAAE,EADE;AAETgB,MAAAA,OAAO,EAAE,EAFA;AAGTE,MAAAA,OAAO,EAAE,KAHA;AAITD,MAAAA,OAAO,EAAE;AAJA,KAAb;AAMA,SAAKd,MAAL,GAAc,EAAd;AACH;;AAuDDwB,EAAAA,MAAM,GAAG;AACL,UAAM;AAAE3B,MAAAA;AAAF,QAAY,KAAK0B,KAAvB;AACA,wBACI;AAAK,MAAA,SAAS,EAAC,WAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAKI;AAAO,MAAA,SAAS,EAAC,cAAjB;AAAgC,MAAA,OAAO,EAAC,cAAxC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI;AACI,MAAA,IAAI,EAAC,MADT;AAEI,MAAA,IAAI,EAAC,OAFT;AAGI,MAAA,KAAK,EAAE1B,KAHX;AAII,MAAA,EAAE,EAAC,cAJP;AAKI,MAAA,WAAW,EAAC,WALhB;AAMI,MAAA,QAAQ,EAAE,KAAKsB,mBANnB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADJ,eASI;AAAG,MAAA,SAAS,EAAC,0BAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MATJ,CALJ,CADJ;AAoBH;;AAzFiC;;AA4FtC,eAAe5B,MAAf","sourcesContent":["import React from 'react';\r\nimport '../Search/Search.css';\r\nimport axios from 'axios';\r\n\r\nclass Search extends  React.Component {\r\n\r\n    constructor( props ) {\r\n        super( props );\r\n\r\n        this.state = {\r\n            query: '',\r\n            results: {},\r\n            loading: false,\r\n            message: '',\r\n        };\r\n        this.cancel = '';\r\n    }\r\n\r\n    fetchSearchResults = (updatedPageNo = '', query ) => {\r\n\r\n        const pageNumber = updatedPageNo ? `&page=${updatedPageNo}` : '';\r\n\r\n        // By default the limit of results is 20\r\n        const searchUrl = `http://test-api.ipromote.ru/API/CATALOG/FIND${query}${pageNumber}`;\r\n        //http://test-api.ipromote.ru/API/CATALOG/FIND${key}\r\n        if (this.cancel) {\r\n            // Cancel the previous request before making a new request\r\n            this.cancel.cancel();\r\n        }\r\n        // Create a new CancelToken\r\n        this.cancel = axios.CancelToken.source();\r\n\r\n        axios\r\n            .get(searchUrl, {\r\n                cancelToken: this.cancel.token,\r\n            })\r\n            .then((res) => {\r\n                const resultNotFoundMsg = !res.data.hits.length\r\n                    ? 'There are no more search results. Please try a new search.'\r\n                    : '';\r\n\r\n                this.setState({\r\n                    results: res.data.hits,\r\n                    message: resultNotFoundMsg,\r\n                    loading: false,\r\n                });\r\n            })\r\n            .catch((error) => {\r\n                if (axios.isCancel(error) || error) {\r\n                    this.setState({\r\n                        loading: false,\r\n                        message: 'Failed to fetch results.Please check network',\r\n                    });\r\n                }\r\n            });\r\n    };\r\n\r\n\r\n\r\n    handleOnInputChange = (event) => {\r\n        const query = event.target.value;\r\n\r\n        if ( ! query ) {\r\n            this.setState({ query, results: {}, message: '' } );\r\n        } else {\r\n            this.setState({ query, loading: true, message: '' }, () => {\r\n                this.fetchSearchResults(1, query);\r\n            });\r\n        }\r\n    };\r\n\r\n    render() {\r\n        const { query } = this.state;\r\n        return (\r\n            <div className=\"container\">\r\n                {/*Heading*/}\r\n                {/*<h2 className=\"heading\">Live Search: React Application</h2>*/}\r\n\r\n                {/*Search Input*/}\r\n                <label className=\"search-label\" htmlFor=\"search-input\">\r\n                    <input\r\n                        type=\"text\"\r\n                        name=\"query\"\r\n                        value={query}\r\n                        id=\"search-input\"\r\n                        placeholder=\"Search...\"\r\n                        onChange={this.handleOnInputChange}\r\n                    />\r\n                    <i className=\"fa fa-search search-icon\"/>\r\n                </label>\r\n\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default Search;"]},"metadata":{},"sourceType":"module"}